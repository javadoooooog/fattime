# 健康管理工具 - 技术架构设计

## 项目概述

### 产品定位
- **目标用户**：都市上班族，有健身基础，熟练使用移动端
- **核心价值**：5分钟快速记录运动数据，简化健身记录流程
- **技术形态**：移动端网页应用（PWA）

### 核心功能需求
1. **运动数据记录**：动作名称、组数、次数、重量、疲劳度、心情
2. **身体数据记录**：体重记录
3. **数据存储**：本地存储，无需云端同步
4. **数据展示**：历史记录查看，简单的进度展示

## 技术架构设计

### 1. 技术选型

#### 前端技术栈
- **框架**：Vue 3 + Composition API
  - 轻量级，适合移动端
  - 组件化开发，便于维护
  - 良好的移动端适配

- **UI框架**：Vant 4
  - 专为移动端设计
  - 组件丰富，开箱即用
  - 支持主题定制

- **构建工具**：Vite
  - 快速的开发体验
  - 优化的生产构建
  - 支持PWA插件

#### 数据存储
- **本地存储**：IndexedDB + Dexie.js
  - 大容量本地存储
  - 结构化数据管理
  - 支持事务和索引

#### PWA特性
- **Service Worker**：离线缓存
- **Web App Manifest**：类原生应用体验
- **响应式设计**：适配各种屏幕尺寸

### 2. 系统架构

```
┌─────────────────────────────────────┐
│           用户界面层 (UI)            │
├─────────────────────────────────────┤
│  运动记录页  │  数据展示页  │  设置页  │
├─────────────────────────────────────┤
│           业务逻辑层 (BLL)           │
├─────────────────────────────────────┤
│  数据验证  │  业务规则  │  状态管理   │
├─────────────────────────────────────┤
│          数据访问层 (DAL)            │
├─────────────────────────────────────┤
│    IndexedDB    │    LocalStorage    │
└─────────────────────────────────────┘
```

### 3. 数据模型设计

#### 运动记录表 (WorkoutRecords)
```javascript
{
  id: string,           // 唯一标识
  date: string,         // 记录日期 (YYYY-MM-DD)
  timestamp: number,    // 时间戳
  exercises: [          // 运动列表
    {
      exerciseName: string,    // 动作名称
      sets: [                  // 组数据
        {
          reps: number,        // 次数
          weight: number,      // 重量(kg)
          restTime: number     // 休息时间(秒)
        }
      ],
      fatigueLevel: number,    // 疲劳度 (1-5)
      mood: string            // 心情 (开心/一般/疲惫)
    }
  ],
  bodyWeight: number,   // 体重
  notes: string         // 备注
}
```

#### 动作库表 (ExerciseLibrary)
```javascript
{
  id: string,
  name: string,         // 动作名称
  category: string,     // 分类 (胸部/背部/腿部等)
  muscleGroups: [],     // 目标肌群
  isCustom: boolean,    // 是否自定义
  frequency: number     // 使用频率(用于排序)
}
```

### 4. 核心功能模块

#### 4.1 快速记录模块
- **智能输入**：常用动作快速选择
- **模板功能**：保存常用训练组合
- **增量输入**：基于上次记录预填充
- **手势操作**：滑动增减数值

#### 4.2 数据管理模块
- **本地存储**：IndexedDB数据持久化
- **数据备份**：导出JSON格式
- **数据清理**：定期清理过期数据

#### 4.3 展示分析模块
- **历史记录**：按日期查看训练记录
- **进度图表**：体重变化趋势
- **统计分析**：训练频率、强度统计

## 开发计划

### Phase 1: 核心功能开发 (2周)
- [x] 项目初始化和环境搭建
- [ ] 数据模型设计和存储层实现
- [ ] 运动记录页面开发
- [ ] 基础数据展示功能

### Phase 2: 用户体验优化 (1周)
- [ ] 快速输入优化
- [ ] 界面美化和交互优化
- [ ] PWA功能集成

### Phase 3: 功能完善 (1周)
- [ ] 数据导入导出
- [ ] 设置页面
- [ ] 性能优化和测试

## 技术风险评估

### 低风险
- Vue 3 + Vant 4 技术栈成熟稳定
- IndexedDB 浏览器支持良好
- PWA 技术标准化程度高

### 中风险
- 移动端兼容性需要充分测试
- 数据量增长后的性能优化

### 风险缓解措施
- 建立完善的测试环境
- 实现数据分页和懒加载
- 定期性能监控和优化

## 质量保障

### 代码质量
- ESLint + Prettier 代码规范
- TypeScript 类型检查
- 单元测试覆盖率 > 80%

### 用户体验
- 响应式设计测试
- 性能指标监控 (LCP < 2.5s)
- 离线功能验证

### 数据安全
- 本地数据加密存储
- 输入数据验证和清理
- 错误处理和用户反馈

---

**架构师**: 88  
**文档版本**: v1.0  
**更新日期**: 2025-01-20